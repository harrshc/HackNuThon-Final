<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responsive Admin Dashboard | Korsat X Parmaga</title>
    <!-- ======= Styles ====== -->
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>

  <body>
    <!-- =============== Navigation ================ -->
    <div class="container">
      <div class="navigation">
        <ul>
          <li>
            <a href="#">
              <span class="icon">
                <ion-icon name="logo-apple"></ion-icon>
              </span>
              <span class="title">Brand Name</span>
            </a>
          </li>

          <li>
            <a href="#">
              <span class="icon">
                <ion-icon name="logo-apple"></ion-icon>
              </span>
              <span class="title">{username} </span>
            </a>
          </li>
          <li>
            <a href="/dash">
              <span class="icon">
                <ion-icon name="home-outline"></ion-icon>
              </span>
              <span class="title">Dashboard</span>
            </a>
          </li>

          <li>
            <a href="/members">
              <span class="icon">
                <ion-icon name="people-outline"></ion-icon>
              </span>
              <span class="title">Members</span>
            </a>
          </li>

          <li>
            <a href="#">
              <span class="icon">
                <ion-icon name="chatbubble-outline"></ion-icon>
              </span>
              <span class="title">Assets</span>
            </a>
          </li>

          <li>
            <a href="#">
              <span class="icon">
                <ion-icon name="help-outline"></ion-icon>
              </span>
              <span class="title">Blog</span>
            </a>
          </li>

          <li>
            <a href="#">
              <span class="icon">
                <ion-icon name="settings-outline"></ion-icon>
              </span>
              <span class="title">Log Out</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- ========================= Main ==================== -->
      <div class="main">
        <div class="topbar">
          <div class="toggle">
            <ion-icon name="menu-outline"></ion-icon>
          </div>

          <div class="search">
            <label>
              <input type="text" placeholder="Search here" />
              <ion-icon name="search-outline"></ion-icon>
            </label>
          </div>

          <div class="user">
            <img src="/images/customer01.jpg" alt="" />
          </div>
        </div>

        <div
          class="container p-4 flex items-center justify-center gap-20 w-full h-25"
        >
          <main class="w-full h-full">
            <div class="mx-auto sm:px-2">
              <!-- row -->
              <div class="flex flex-wrap flex-row">
                <div class="flex-shrink max-w-full px-4 w-full">
                  <h1 class="text-xl font-bold mt-3 mb-5">Assets</h1>
                </div>

                <div class="flex-shrink max-w-full px-4 w-full mb-6">
                  <div
                    class="p-6 relative bg-white dark:bg-white rounded-lg h-full"
                  >
                    <div class="flex flex-wrap flex-row -mx-4">
                      <div class="flex-shrink max-w-full px-4 w-full">
                        <div
                          class="md:flex md:justify-between md:items-center w-full"
                        >
                          <a
                            href="#"
                            class="addBtn py-2 px-4 text-center mb-3 rounded leading-5 text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0"
                            >Add new
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="12"
                              height="12"
                              fill="currentColor"
                              class="inline-block ltr:ml-1 rtl:mr-1 bi bi-plus-lg"
                              viewBox="0 0 16 16"
                            >
                              <path
                                d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"
                              ></path>
                            </svg>
                          </a>
                          <!-- Add New Form -->
                          <!-- Add New Form -->
                          <div
                            id="addNewForm"
                            class="hidden flex items-center justify-center"
                          >
                            <form
                              action="/assets"
                              method="post"
                              class="mt-4 flex items-center justify-center gap-5"
                            >
                              <div class="mb-4">
                                <label
                                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                                  for="filename"
                                  >Upload file</label
                                >
                                <input
                                  class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"
                                  id="filename"
                                  name="filename"
                                  type="file"
                                />
                              </div>
                              <div class="flex items-center justify-between">
                                <button
                                  type="button"
                                  id="uploadButton"
                                  name="submit"
                                  class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
                                >
                                  Upload
                                </button>
                              </div>
                            </form>
                          </div>
                          <script>
                            document.addEventListener(
                              "DOMContentLoaded",
                              function () {
                                const uploadButton =
                                  document.getElementById("uploadButton");
                                const fileInput =
                                  document.getElementById("filename");

                                uploadButton.addEventListener(
                                  "click",
                                  function () {
                                    const file = fileInput.files[0];
                                    if (!file) {
                                      alert("Please select a file.");
                                      return;
                                    }

                                    const formData = new FormData();
                                    formData.append("filename", file);

                                    fetch("/assets", {
                                      method: "POST",
                                      body: formData,
                                    })
                                      .then((response) => {
                                        if (response.ok) {
                                          alert("File uploaded successfully.");
                                        } else {
                                          throw new Error(
                                            "Failed to upload file."
                                          );
                                        }
                                      })
                                      .catch((error) => {
                                        console.error("Error:", error);
                                        alert(
                                          "An error occurred while uploading the file."
                                        );
                                      });
                                  }
                                );
                              }
                            );
                          </script>

                          <!-- search -->
                          <div
                            class="relative flex items-center w-full md:w-64 h-full group mt-6 md:mt-0"
                          >
                            <svg
                              class="absolute left-0 z-20 w-4 h-4 ml-4 text-gray-500 pointer-events-none fill-current group-hover:text-gray-400 block"
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 20 20"
                            >
                              <path
                                d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"
                              ></path>
                            </svg>
                            <input
                              type="text"
                              class="block w-full py-1.5 pl-10 pr-4 leading-normal rounded focus:outline-none bg-gray-100 border border-gray-100 focus:border-gray-200 focus:ring-0 dark:text-gray-400 dark:bg-white dark:border-gray-700 dark:focus:border-gray-700"
                              placeholder="Search files"
                            />
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- vertical tabs -->
                    <div class="flex flex-wrap flex-row -mx-4">
                      <div class="flex-shrink max-w-full px-4 w-full">
                        <!-- content filter start -->
                        <div class="relative w-full overflow-x-auto">
                          <h1 class="text-xl font-bold mb-4">
                            Uploaded Assets
                          </h1>
                          <div class="grid grid-cols-3 gap-4">
                            <% assets.forEach(asset => { %>
                            <div
                              class="bg-white shadow-lg rounded-lg overflow-hidden"
                            >
                              <div class="relative h-48">
                                <% if (asset.type === 'image') { %>
                                <img
                                  src="<%= asset.url %>"
                                  alt="<%= asset.filename %>"
                                  class="object-cover w-full h-full"
                                />
                                <% } else if (asset.type === 'pdf') { %>
                                <div
                                  class="flex items-center justify-center w-full h-full bg-gray-100"
                                >
                                  <svg
                                    class="w-16 h-16 text-red-500"
                                    fill="currentColor"
                                    viewBox="0 0 20 20"
                                  >
                                    <path
                                      fill-rule="evenodd"
                                      d="M5.293 4.707a1 1 0 010 1.414L3.414 8l1.879 1.879a1 1 0 11-1.414 1.414L2 8l2.879-2.879a1 1 0 011.414 0z"
                                      clip-rule="evenodd"
                                    ></path>
                                    <path
                                      fill-rule="evenodd"
                                      d="M13.793 4.707a1 1 0 010 1.414L11.414 8l2.379 2.379a1 1 0 01-1.414 1.414L10 8l2.379-2.379a1 1 0 011.414 0z"
                                      clip-rule="evenodd"
                                    ></path>
                                    <path
                                      fill-rule="evenodd"
                                      d="M6 11.5a.5.5 0 01.5-.5h5a.5.5 0 010 1h-5a.5.5 0 01-.5-.5zM12.5 14a.5.5 0 01-.5.5h-7a.5.5 0 010-1h7a.5.5 0 01.5.5z"
                                      clip-rule="evenodd"
                                    ></path>
                                  </svg>
                                </div>
                                <% } else { %>
                                <div
                                  class="flex items-center justify-center w-full h-full bg-gray-200 text-gray-600"
                                >
                                  <svg
                                    class="w-12 h-12"
                                    fill="currentColor"
                                    viewBox="0 0 20 20"
                                  >
                                    <path
                                      fill-rule="evenodd"
                                      d="M3 1a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2H3zm9 6a1 1 0 011 1v1h2a1 1 0 010 2h-2v1a1 1 0 01-1 1H8a1 1 0 010-2h2V9a1 1 0 011-1z"
                                      clip-rule="evenodd"
                                    ></path>
                                  </svg>
                                </div>
                                <% } %>
                              </div>
                              <div class="p-4">
                                <h2 class="text-lg font-semibold mb-2">
                                  <%= asset.filename %>
                                </h2>
                                <div class="flex items-center justify-between">
                                  <a
                                    href="<%= asset.url %>"
                                    download="<%= asset.filename %>"
                                    class="text-blue-600 hover:underline"
                                    >Download</a
                                  >
                                  <span class="text-sm text-gray-600"
                                    ><%= asset.filesize %></span
                                  >
                                </div>
                              </div>
                            </div>
                            <% }); %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const addNewButton = document.querySelector(".addBtn");
        const addNewForm = document.getElementById("addNewForm");

        addNewButton.addEventListener("click", function () {
          addNewForm.classList.toggle("hidden");
        });
      });
    </script>

    <!-- =========== Scripts =========  -->
    <script src="./javascripts/main.js"></script>

    <!-- ====== ionicons ======= -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
  </body>
</html>
